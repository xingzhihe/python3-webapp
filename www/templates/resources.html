{% extends '__base__.html' %}

{% block title %}资源管理{% endblock %}

{% block beforehead %}
<style>
    .tree {
        border: 1px solid #ddd;
        padding: 5px;
        min-height: 250px;
    }
    .tree .selected { background-color: #b5e5f7;}
    .tree li {
        cursor: pointer;
        list-style-type: none;
    }
    .tree li span{
        display:inline-block; 
    }
    .tree li .icon{
        width:12px; 
        line-height:12px; 
        text-align:center; 
        border:1px solid black; 
        margin-left:5px;
        margin-right:5px;
    }
    li.tree-item>ul{
        margin: 0px;
    }
    .bold {
        font-weight: bold;
    }
</style>
<script>
    var vm_tree = undefined;
    function initTree(resources){
        $('#loading').hide();
        $('#vm_tree').show();
        vm_tree = new Vue({
            el: '#vm_tree', 
            data: {
                treeData:{
                    resources:resources
                }
            },
            methods: {
                load_databases: function (ds) {
                    loadDatabases(ds);
                }
            }
        });
    }

    $(function() {
        getJSON('/api/resources', function (err, results) {
            if (err) {
                return fatal(err);
            }

            initTree(results.resources);
            
            //initGridDataSource(results.datasources,results.page);
        });
    });

</script>

{% endblock %}

{% block content %}

    <div class="uk-width-1-1 uk-margin-bottom">
        <div class="uk-panel uk-panel-box">
            <ul class="uk-breadcrumb">
                <li><a href="/manage/comments">评论</a></li>
                <li><a href="/manage/blogs">日志</a></li>
                <li><a href="/manage/users">用户</a></li>
                <li><a href="/manage/datasources">数据源</a></li>
                <li><a href="/manage/metadata">元数据</a></li>
                <li class="uk-active"><span>资源</span></li>
            </ul>
        </div>
    </div>
    
    <div id="error" class="uk-width-1-1">
    </div>

    <div id="loading" class="uk-width-1-1 uk-text-center">
        <span><i class="uk-icon-spinner uk-icon-medium uk-icon-spin"></i> 正在加载...</span>
    </div>
    
    <div id="vm_tree" class="uk-width-3-10">
        <hxz-tree v-with="treeData"></hxz-tree>
    </div>

    <div id="vm_main" class="uk-width-7-10">
        
    </div>
    
{% endblock %}